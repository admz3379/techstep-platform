<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free 3-Day SOC Trial - TechStep</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        .trial-app-container {
            min-height: 100vh;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
        }
        
        .day-chip {
            display: inline-flex;
            align-items: center;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .day-chip.active {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
        }
        
        .day-chip.completed {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }
        
        .day-chip.locked {
            background: #374151;
            color: #9ca3af;
            cursor: not-allowed;
        }
        
        .skill-bar {
            width: 100%;
            height: 6px;
            background: #374151;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .skill-fill {
            height: 100%;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            transition: width 1s ease-in-out;
        }
        
        .evidence-item {
            background: #1f2937;
            border: 1px solid #374151;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 12px;
        }
        
        .code-block {
            background: #111827;
            border: 1px solid #374151;
            border-radius: 8px;
            padding: 16px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: #e5e7eb;
            overflow-x: auto;
            position: relative;
        }
        
        .copy-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background: #374151;
            border: none;
            color: #9ca3af;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }
        
        .copy-btn:hover {
            background: #4b5563;
            color: white;
        }
        
        .voice-player button {
            transition: all 0.3s ease;
        }
        
        .voice-player button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background: #1f2937;
            border: 1px solid #374151;
            border-radius: 12px;
            padding: 24px;
            max-width: 90vw;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #10b981;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            z-index: 2000;
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.3s ease;
        }
        
        .toast.show {
            opacity: 1;
            transform: translateX(0);
        }
        
        .ioc-chip {
            display: inline-block;
            background: #374151;
            color: #e5e7eb;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-family: monospace;
            margin: 2px;
            cursor: pointer;
            border: 1px solid #4b5563;
            transition: all 0.2s ease;
        }
        
        .ioc-chip:hover {
            background: #4b5563;
            border-color: #6b7280;
        }
        
        .ioc-chip.copied {
            background: #10b981;
            border-color: #059669;
        }
    </style>
</head>
<body class="bg-gray-900 text-white">
    <!-- Navigation -->
    <nav class="bg-gray-800 shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <a href="index.html" class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-shield-alt text-white"></i>
                        </div>
                        <span class="text-xl font-bold text-white">TechStep</span>
                    </a>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="text-sm text-gray-300">Free 3-Day SOC Trial</div>
                    <a href="index.html" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition duration-300">
                        <i class="fas fa-home mr-2"></i>Back to Main
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Trial App Container -->
    <div id="trialApp" class="trial-app-container">
        <!-- Trial Registration -->
        <div id="trialRegistration" class="trial-registration">
            <div class="max-w-4xl mx-auto px-4 py-8">
                <div class="bg-gray-800 rounded-lg border border-gray-700 p-8">
                    <div class="text-center mb-8">
                        <div class="flex items-center justify-center mb-4">
                            <div class="w-16 h-16 bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg flex items-center justify-center">
                                <i class="fas fa-shield-alt text-2xl text-white"></i>
                            </div>
                        </div>
                        <h1 class="text-3xl font-bold text-white mb-2">Try Cybersecurity First — Free 3-Day SOC Trial</h1>
                        <p class="text-gray-300 text-lg">Test real investigations, build confidence, and decide with data—before you invest.</p>
                    </div>

                    <div class="bg-gradient-to-r from-purple-900/50 to-blue-900/50 rounded-lg p-6 mb-8">
                        <p class="text-center text-white text-lg leading-relaxed">
                            "Before you purchase the 6-month program, take 3 days to try the work. Investigate real incidents, 
                            hear mentor voice briefings, and finish with a certificate—so you can decide confidently."
                        </p>
                    </div>

                    <div class="grid md:grid-cols-2 gap-8">
                        <div>
                            <h3 class="text-xl font-bold text-white mb-4">What You'll Experience:</h3>
                            <div class="space-y-3">
                                <div class="flex items-start">
                                    <i class="fas fa-check-circle text-green-400 mt-1 mr-3"></i>
                                    <span class="text-gray-300">Real SOC analyst tasks at EverTrust Bank</span>
                                </div>
                                <div class="flex items-start">
                                    <i class="fas fa-check-circle text-green-400 mt-1 mr-3"></i>
                                    <span class="text-gray-300">Voice-guided investigations (20-30s segments)</span>
                                </div>
                                <div class="flex items-start">
                                    <i class="fas fa-check-circle text-green-400 mt-1 mr-3"></i>
                                    <span class="text-gray-300">Daily PDF guides with audio QR codes</span>
                                </div>
                                <div class="flex items-start">
                                    <i class="fas fa-check-circle text-green-400 mt-1 mr-3"></i>
                                    <span class="text-gray-300">Named certificate + LinkedIn badge</span>
                                </div>
                                <div class="flex items-start">
                                    <i class="fas fa-check-circle text-green-400 mt-1 mr-3"></i>
                                    <span class="text-gray-300">No cost, no commitment</span>
                                </div>
                            </div>
                        </div>

                        <div>
                            <form id="trialRegistrationForm" class="space-y-4">
                                <h3 class="text-xl font-bold text-white mb-4">Start Your Free Trial:</h3>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-gray-300 text-sm font-medium mb-2">First Name *</label>
                                        <input type="text" id="firstName" required 
                                               class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500">
                                    </div>
                                    <div>
                                        <label class="block text-gray-300 text-sm font-medium mb-2">Last Name *</label>
                                        <input type="text" id="lastName" required 
                                               class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500">
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-gray-300 text-sm font-medium mb-2">Email Address *</label>
                                    <input type="email" id="email" required 
                                           class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500">
                                </div>
                                <div>
                                    <label class="block text-gray-300 text-sm font-medium mb-2">Phone Number *</label>
                                    <input type="tel" id="phone" required 
                                           class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500">
                                </div>
                                <div>
                                    <label class="block text-gray-300 text-sm font-medium mb-2">Address (optional)</label>
                                    <textarea id="address" rows="2" 
                                              class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500"></textarea>
                                </div>
                                <div class="flex items-start mt-4">
                                    <input type="checkbox" id="consentUpdates" required class="mt-1 mr-3">
                                    <label for="consentUpdates" class="text-gray-300 text-sm">
                                        I agree to receive updates about my trial progress and would like to hear about the full program. 
                                        I can unsubscribe anytime. *
                                    </label>
                                </div>
                                <button type="submit" id="startTrialBtn" 
                                        class="w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300 mt-6">
                                    <i class="fas fa-rocket mr-2"></i>Start My Free 3-Day Trial
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Trial Dashboard -->
        <div id="trialDashboard" class="trial-dashboard hidden">
            <div class="max-w-7xl mx-auto px-4 py-8">
                <!-- Trial Header -->
                <div class="bg-gray-800 rounded-lg border border-gray-700 p-6 mb-6">
                    <div class="flex justify-between items-start">
                        <div>
                            <h1 class="text-2xl font-bold text-white mb-2">Welcome to EverTrust Bank SOC, <span id="trialUserName">Analyst</span></h1>
                            <div class="flex items-center text-gray-300">
                                <i class="fas fa-shield-alt text-purple-400 mr-2"></i>
                                <span>SOC Level 1 Analyst</span>
                                <span class="ml-4 px-3 py-1 bg-blue-600 text-white text-sm rounded-full">3-Day Express Trial</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="relative inline-block">
                                <svg class="w-16 h-16 transform -rotate-90">
                                    <circle cx="32" cy="32" r="28" stroke="currentColor" stroke-width="4" fill="transparent" class="text-gray-600"/>
                                    <circle id="progressCircle" cx="32" cy="32" r="28" stroke="currentColor" stroke-width="4" fill="transparent" 
                                            class="text-purple-400" stroke-dasharray="175.93" stroke-dashoffset="175.93"/>
                                </svg>
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <span id="progressPercent" class="text-lg font-bold text-white">0%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Day Chips -->
                    <div class="flex flex-wrap gap-4 mt-4">
                        <div id="day1Chip" class="day-chip active" data-day="1">
                            <i class="fas fa-envelope mr-2"></i>Day 1: Email Investigation
                        </div>
                        <div id="day2Chip" class="day-chip locked" data-day="2">
                            <i class="fas fa-lock mr-2"></i>Day 2: Log Analysis
                        </div>
                        <div id="day3Chip" class="day-chip locked" data-day="3">
                            <i class="fas fa-lock mr-2"></i>Day 3: Incident Response
                        </div>
                    </div>

                    <!-- Skills Meter -->
                    <div class="mt-6">
                        <h3 class="text-lg font-bold text-white mb-3">Skill Development</h3>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <div class="skill-meter">
                                <div class="text-sm text-gray-300 mb-1">Foundations</div>
                                <div class="skill-bar">
                                    <div class="skill-fill" data-skill="foundations" style="width: 0%"></div>
                                </div>
                            </div>
                            <div class="skill-meter">
                                <div class="text-sm text-gray-300 mb-1">SIEM/Logs</div>
                                <div class="skill-bar">
                                    <div class="skill-fill" data-skill="siem" style="width: 0%"></div>
                                </div>
                            </div>
                            <div class="skill-meter">
                                <div class="text-sm text-gray-300 mb-1">Threat Intel</div>
                                <div class="skill-bar">
                                    <div class="skill-fill" data-skill="threat" style="width: 0%"></div>
                                </div>
                            </div>
                            <div class="skill-meter">
                                <div class="text-sm text-gray-300 mb-1">IR Comms</div>
                                <div class="skill-bar">
                                    <div class="skill-fill" data-skill="ir" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Trial Content -->
                <div class="grid lg:grid-cols-3 gap-6">
                    <!-- Left Column: Mission Brief -->
                    <div class="lg:col-span-2">
                        <div id="missionBrief" class="bg-gray-800 rounded-lg border border-gray-700 p-6">
                            <!-- Dynamic content will be loaded here -->
                        </div>
                    </div>

                    <!-- Right Column: Actions & Sidebar -->
                    <div class="space-y-6">
                        <!-- Voice Player -->
                        <div class="bg-gray-800 rounded-lg border border-gray-700 p-4">
                            <h3 class="text-lg font-bold text-white mb-3">
                                <i class="fas fa-volume-up text-blue-400 mr-2"></i>Voice Briefing
                            </h3>
                            <div class="voice-player">
                                <button id="playVoiceBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition duration-300">
                                    <i class="fas fa-play mr-2"></i>Play Briefing
                                </button>
                                <div id="voiceProgress" class="mt-2 bg-gray-700 rounded-full h-2 hidden">
                                    <div class="bg-blue-400 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Download PDF -->
                        <div class="bg-gray-800 rounded-lg border border-gray-700 p-4">
                            <button id="downloadPdfBtn" class="w-full bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg transition duration-300">
                                <i class="fas fa-download mr-2"></i>Download Day Guide (PDF)
                            </button>
                        </div>

                        <!-- CTAs -->
                        <div class="bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg p-4">
                            <h3 class="text-white font-bold mb-3">Ready to Go Pro?</h3>
                            <div class="space-y-2">
                                <button onclick="window.location.href='index.html#courses'" class="w-full bg-white bg-opacity-20 hover:bg-opacity-30 text-white py-2 px-4 rounded-lg transition duration-300">
                                    <i class="fas fa-graduation-cap mr-2"></i>Enroll Now
                                </button>
                                <button onclick="showConsultationModal()" class="w-full bg-white bg-opacity-20 hover:bg-opacity-30 text-white py-2 px-4 rounded-lg transition duration-300">
                                    <i class="fas fa-calendar mr-2"></i>Schedule Advisor
                                </button>
                                <button onclick="downloadSyllabus()" class="w-full bg-white bg-opacity-20 hover:bg-opacity-30 text-white py-2 px-4 rounded-lg transition duration-300">
                                    <i class="fas fa-file-alt mr-2"></i>Download Syllabus
                                </button>
                            </div>
                        </div>

                        <!-- Artifacts Drawer -->
                        <div class="bg-gray-800 rounded-lg border border-gray-700 p-4">
                            <h3 class="text-lg font-bold text-white mb-3">
                                <i class="fas fa-folder-open text-yellow-400 mr-2"></i>Evidence Artifacts
                            </h3>
                            <div id="artifactsContent" class="space-y-2 text-sm text-gray-300">
                                <div class="text-gray-400">No artifacts yet - complete your first task!</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Certificate Modal -->
    <div id="certificateModal" class="modal-overlay">
        <div class="modal-content max-w-2xl">
            <div class="text-center">
                <div class="flex items-center justify-center mb-6">
                    <div class="w-20 h-20 bg-gradient-to-r from-yellow-400 to-yellow-600 rounded-full flex items-center justify-center">
                        <i class="fas fa-trophy text-3xl text-white"></i>
                    </div>
                </div>
                <h2 class="text-3xl font-bold text-white mb-4">Congratulations!</h2>
                <p class="text-gray-300 mb-6">You've completed the TechStep 3-Day SOC Trial</p>
                
                <div class="bg-gray-700 rounded-lg p-6 mb-6">
                    <h3 class="text-xl font-bold text-white mb-4">Certificate of Completion</h3>
                    <div class="border-2 border-yellow-400 rounded-lg p-4 bg-white text-gray-900">
                        <div class="text-center">
                            <h4 class="text-lg font-bold">TechStep Foundation</h4>
                            <p class="text-sm">certifies that</p>
                            <h3 class="text-xl font-bold my-2" id="certificateName">John Doe</h3>
                            <p class="text-sm">has successfully completed the</p>
                            <h4 class="text-lg font-bold">3-Day SOC Analyst Express Trial</h4>
                            <p class="text-xs mt-4" id="certificateDate">December 2024</p>
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <button onclick="downloadCertificate()" class="bg-yellow-600 hover:bg-yellow-700 text-white py-2 px-4 rounded-lg transition duration-300">
                        <i class="fas fa-download mr-2"></i>Download Certificate
                    </button>
                    <button onclick="addToLinkedIn()" class="bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition duration-300">
                        <i class="fab fa-linkedin mr-2"></i>Add to LinkedIn
                    </button>
                </div>
                
                <div class="mt-6 p-4 bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg">
                    <h3 class="text-white font-bold mb-2">Ready to become a cybersecurity professional?</h3>
                    <button onclick="window.location.href='index.html#courses'" class="bg-white text-purple-600 font-bold py-2 px-6 rounded-lg hover:bg-gray-100 transition duration-300">
                        Enroll in Full Program
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Trial App State Management
        let trialState = {
            user: null,
            currentDay: 1,
            progress: 0,
            completedTasks: [],
            artifacts: [],
            skills: {
                foundations: 0,
                siem: 0,
                threat: 0,
                ir: 0
            }
        };

        // Trial Content Data
        const trialContent = {
            1: {
                title: "Day 1 — Suspicious Email Investigation",
                hero: "Welcome to EverTrust Bank SOC, [FirstName].",
                objectives: [
                    "Inspect email headers (SPF/DKIM/DMARC)",
                    "Extract IOCs from message content",
                    "Check URL reputation",
                    "Recommend containment action"
                ],
                voiceScript: "Welcome aboard, [FirstName]. You're on triage. [pause] Open the email headers—check sender domain and auth results. Do SPF, DKIM, and DMARC align? [pause] Extract the URL and reputation-check it. Then choose containment: quarantine, password reset, or escalate. Explain your rationale.",
                evidence: {
                    headers: "Received: from mail.suspicious-sender.com (mail.suspicious-sender.com [192.168.100.42])\\nby mx.evertrust.com (Postfix) with ESMTP id 5A2B8C00123\\nfor <j.smith@evertrust.com>; Mon, 23 Dec 2024 09:15:33 +0000 (UTC)\\nReturn-Path: <phishing@suspicious-sender.com>\\nReceived-SPF: fail (suspicious-sender.com: domain of phishing@suspicious-sender.com does not designate 192.168.100.42 as permitted sender)\\nAuthentication-Results: mx.evertrust.com;\\n    dmarc=fail (p=reject dis=none) header.from=suspicious-sender.com;\\n    spf=fail smtp.mailfrom=phishing@suspicious-sender.com;\\n    dkim=fail header.d=suspicious-sender.com",
                    body: "Dear EverTrust Bank Customer,\\n\\nYour account has been temporarily suspended due to suspicious activity. To reactivate your account immediately, please click the link below:\\n\\nhttps://evertrust-security-verification.suspicious-site.com/login?token=abc123\\n\\nIf you do not verify within 24 hours, your account will be permanently closed.\\n\\nThank you,\\nEverTrust Security Team",
                    iocs: ["suspicious-sender.com", "192.168.100.42", "evertrust-security-verification.suspicious-site.com", "phishing@suspicious-sender.com"]
                },
                resources: [
                    { name: "VirusTotal", url: "https://virustotal.com" },
                    { name: "URLVoid", url: "https://urlvoid.com" },
                    { name: "Have I Been Pwned", url: "https://haveibeenpwned.com" }
                ],
                deliverable: "4-6 bullet triage note + risk rating (High/Medium/Low)"
            },
            2: {
                title: "Day 2 — Log Review Challenge (Auth Brute Force)",
                hero: "Night shift saw a spike in failures around 02:00.",
                objectives: [
                    "Query authentication logs for failed logins",
                    "Identify suspicious patterns and spikes",
                    "Correlate successful logins after failures",
                    "Check geographic anomalies and IP reputation"
                ],
                voiceScript: "Night shift saw a spike in failures around 02:00. [pause] Pivot by source IP and user—any geographic anomalies? [pause] If you see success after a burst of failures, treat as probable compromise. Recommend controls and monitoring.",
                evidence: {
                    query: "index=security sourcetype=authentication | stats count by src_ip, user, result | where result=\"failed\" OR result=\"success\" | eval hour=strftime(_time,\"%H\") | where hour>=2 AND hour<=4",
                    logs: [
                        { time: "02:15:33", src_ip: "203.45.67.89", user: "j.martinez", result: "failed", country: "Romania" },
                        { time: "02:15:45", src_ip: "203.45.67.89", user: "j.martinez", result: "failed", country: "Romania" },
                        { time: "02:15:58", src_ip: "203.45.67.89", user: "j.martinez", result: "failed", country: "Romania" },
                        { time: "02:16:12", src_ip: "203.45.67.89", user: "j.martinez", result: "success", country: "Romania" },
                        { time: "02:16:45", src_ip: "203.45.67.89", user: "j.martinez", result: "success", country: "Romania" }
                    ],
                    findings: "User j.martinez successful login from Romania after multiple failures. Normal work location: New York, USA."
                },
                resources: [
                    { name: "AbuseIPDB", url: "https://abuseipdb.com" },
                    { name: "Splunk Docs", url: "https://docs.splunk.com" },
                    { name: "IP Geolocation", url: "https://ipinfo.io" }
                ],
                deliverable: "Screenshot + 3-sentence finding + action checklist"
            },
            3: {
                title: "Day 3 — Mini-Incident Capstone (Phishing + Logs)",
                hero: "Bring it together.",
                objectives: [
                    "Correlate Day 1 IOCs with Day 2 log artifacts",
                    "Establish timeline of events",
                    "Write executive summary (120 words max)",
                    "Recommend next steps and containment"
                ],
                voiceScript: "Bring it together. [pause] Link the suspicious URL to auth anomalies. State what happened, impact, mitigation, and current status—no jargon. [pause] Submit for review and prepare next steps.",
                evidence: {
                    correlation: "Email received by j.martinez@evertrust.com at 08:30, login anomalies detected at 02:00 same day. Possible credential compromise via phishing.",
                    template: "EXECUTIVE SUMMARY:\\n\\nINCIDENT: [Brief description]\\nIMPACT: [Business impact]\\nSTATUS: [Current containment status]\\nNEXT STEPS: [Immediate actions needed]"
                },
                resources: [
                    { name: "NIST IR Framework", url: "https://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-61r2.pdf" },
                    { name: "MITRE ATT&CK", url: "https://attack.mitre.org" }
                ],
                deliverable: "Executive summary + certificate completion"
            }
        };

        // Initialize Trial App
        function initializeTrialApp() {
            // Check if user is registered
            const storedUser = localStorage.getItem('trialUser');
            if (storedUser) {
                trialState.user = JSON.parse(storedUser);
                showTrialDashboard();
                loadTrialProgress();
            } else {
                showTrialRegistration();
            }
        }

        // Show Trial Registration
        function showTrialRegistration() {
            document.getElementById('trialRegistration').classList.remove('hidden');
            document.getElementById('trialDashboard').classList.add('hidden');
        }

        // Show Trial Dashboard
        function showTrialDashboard() {
            document.getElementById('trialRegistration').classList.add('hidden');
            document.getElementById('trialDashboard').classList.remove('hidden');
            
            // Update user name
            document.getElementById('trialUserName').textContent = trialState.user?.firstName || 'Analyst';
            
            // Load current day content
            loadDayContent(trialState.currentDay);
        }

        // Registration Form Handler
        document.getElementById('trialRegistrationForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = {
                firstName: document.getElementById('firstName').value,
                lastName: document.getElementById('lastName').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                address: document.getElementById('address').value,
                consent: document.getElementById('consentUpdates').checked,
                registeredAt: new Date().toISOString()
            };
            
            const submitBtn = document.getElementById('startTrialBtn');
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Starting Trial...';
            submitBtn.disabled = true;
            
            try {
                // Simulate API call
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // Store user data
                trialState.user = formData;
                localStorage.setItem('trialUser', JSON.stringify(formData));
                
                // Send email notification (simulated)
                console.log('Email sent to support@techstepfoundation.org:', {
                    subject: `New 3-Day Trial: ${formData.firstName} ${formData.lastName}`,
                    user: formData,
                    timestamp: new Date().toISOString()
                });
                
                // Show dashboard
                showTrialDashboard();
                showToast('Welcome to your free trial! Starting Day 1...');
                
            } catch (error) {
                showToast('Registration failed. Please try again.', 'error');
                submitBtn.innerHTML = '<i class="fas fa-rocket mr-2"></i>Start My Free 3-Day Trial';
                submitBtn.disabled = false;
            }
        });

        // Load Day Content
        function loadDayContent(day) {
            const content = trialContent[day];
            if (!content) return;
            
            const missionBrief = document.getElementById('missionBrief');
            missionBrief.innerHTML = `
                <div class="mb-6">
                    <h2 class="text-2xl font-bold text-white mb-2">${content.title}</h2>
                    <p class="text-lg text-blue-400">${content.hero.replace('[FirstName]', trialState.user?.firstName || 'Analyst')}</p>
                </div>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="text-lg font-bold text-white mb-3">Mission Objectives:</h3>
                        <ul class="space-y-2">
                            ${content.objectives.map(obj => `
                                <li class="flex items-start">
                                    <i class="fas fa-target text-blue-400 mt-1 mr-3"></i>
                                    <span class="text-gray-300">${obj}</span>
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                    
                    <div>
                        <h3 class="text-lg font-bold text-white mb-3">Evidence Panel:</h3>
                        ${generateEvidencePanel(content.evidence)}
                    </div>
                </div>
                
                <div class="mt-6">
                    <h3 class="text-lg font-bold text-white mb-3">Resources:</h3>
                    <div class="flex flex-wrap gap-2">
                        ${content.resources.map(resource => `
                            <a href="${resource.url}" target="_blank" class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm transition duration-300">
                                <i class="fas fa-external-link-alt mr-1"></i>${resource.name}
                            </a>
                        `).join('')}
                    </div>
                </div>
                
                <div class="mt-6 p-4 bg-gray-700 rounded-lg">
                    <h3 class="text-lg font-bold text-white mb-2">Deliverable:</h3>
                    <p class="text-gray-300">${content.deliverable}</p>
                    <button onclick="submitTask(${day})" class="mt-3 bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg transition duration-300">
                        <i class="fas fa-check mr-2"></i>Submit Task
                    </button>
                </div>
            `;
            
            // Update voice script
            updateVoicePlayer(content.voiceScript);
        }

        // Generate Evidence Panel
        function generateEvidencePanel(evidence) {
            let html = '<div class="space-y-4">';
            
            Object.keys(evidence).forEach(key => {
                if (key === 'iocs') {
                    html += `
                        <div class="evidence-item">
                            <h4 class="font-semibold text-white mb-2">IOCs:</h4>
                            <div class="flex flex-wrap gap-1">
                                ${evidence[key].map(ioc => `
                                    <span class="ioc-chip" onclick="copyToClipboard('${ioc}')" title="Click to copy">${ioc}</span>
                                `).join('')}
                            </div>
                        </div>
                    `;
                } else if (key === 'headers' || key === 'body' || key === 'query') {
                    html += `
                        <div class="evidence-item">
                            <h4 class="font-semibold text-white mb-2">${key.charAt(0).toUpperCase() + key.slice(1)}:</h4>
                            <div class="code-block">
                                <button class="copy-btn" onclick="copyToClipboard(\`${evidence[key]}\`)">Copy</button>
                                <pre>${evidence[key].replace(/\\n/g, '\n')}</pre>
                            </div>
                        </div>
                    `;
                } else if (key === 'logs') {
                    html += `
                        <div class="evidence-item">
                            <h4 class="font-semibold text-white mb-2">Authentication Logs:</h4>
                            <div class="overflow-x-auto">
                                <table class="w-full text-xs text-gray-300">
                                    <thead>
                                        <tr class="border-b border-gray-600">
                                            <th class="text-left p-2">Time</th>
                                            <th class="text-left p-2">IP</th>
                                            <th class="text-left p-2">User</th>
                                            <th class="text-left p-2">Result</th>
                                            <th class="text-left p-2">Country</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${evidence[key].map(log => `
                                            <tr class="${log.result === 'success' ? 'text-green-400' : 'text-red-400'}">
                                                <td class="p-2">${log.time}</td>
                                                <td class="p-2">${log.src_ip}</td>
                                                <td class="p-2">${log.user}</td>
                                                <td class="p-2">${log.result}</td>
                                                <td class="p-2">${log.country}</td>
                                            </tr>
                                        `).join('')}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    `;
                } else {
                    html += `
                        <div class="evidence-item">
                            <h4 class="font-semibold text-white mb-2">${key.charAt(0).toUpperCase() + key.slice(1)}:</h4>
                            <p class="text-gray-300 text-sm">${evidence[key]}</p>
                        </div>
                    `;
                }
            });
            
            html += '</div>';
            return html;
        }

        // Update Voice Player
        function updateVoicePlayer(script) {
            const playBtn = document.getElementById('playVoiceBtn');
            playBtn.onclick = () => playVoiceScript(script);
        }

        // Play Voice Script (Simulated)
        function playVoiceScript(script) {
            const playBtn = document.getElementById('playVoiceBtn');
            const progress = document.getElementById('voiceProgress');
            const progressBar = progress.querySelector('div');
            
            playBtn.innerHTML = '<i class="fas fa-pause mr-2"></i>Playing...';
            playBtn.disabled = true;
            progress.classList.remove('hidden');
            
            // Simulate voice playback with progress
            let currentProgress = 0;
            const interval = setInterval(() => {
                currentProgress += 2;
                progressBar.style.width = currentProgress + '%';
                
                if (currentProgress >= 100) {
                    clearInterval(interval);
                    playBtn.innerHTML = '<i class="fas fa-play mr-2"></i>Replay Briefing';
                    playBtn.disabled = false;
                    setTimeout(() => {
                        progress.classList.add('hidden');
                        progressBar.style.width = '0%';
                    }, 1000);
                }
            }, 100);
            
            // Log the voice script for TTS integration
            console.log('Voice Script:', script.replace('[FirstName]', trialState.user?.firstName || 'Analyst'));
        }

        // Submit Task
        function submitTask(day) {
            // Update progress
            trialState.progress = (day / 3) * 100;
            trialState.completedTasks.push(day);
            
            // Update skills based on day
            updateSkills(day);
            
            // Update UI
            updateProgressUI();
            updateSkillsUI();
            
            // Mark day as completed
            markDayCompleted(day);
            
            // Show completion message
            if (day < 3) {
                showToast(`Day ${day} completed! Day ${day + 1} will unlock tomorrow.`);
                // In a real implementation, Day 2 and 3 would unlock based on actual time
                // For demo purposes, we'll unlock immediately
                setTimeout(() => {
                    unlockDay(day + 1);
                }, 2000);
            } else {
                // Trial completed
                showCertificateModal();
            }
            
            // Save progress
            localStorage.setItem('trialProgress', JSON.stringify(trialState));
        }

        // Update Skills
        function updateSkills(day) {
            switch(day) {
                case 1:
                    trialState.skills.foundations += 33;
                    trialState.skills.threat += 25;
                    break;
                case 2:
                    trialState.skills.siem += 50;
                    trialState.skills.foundations += 33;
                    break;
                case 3:
                    trialState.skills.ir += 50;
                    trialState.skills.threat += 25;
                    trialState.skills.foundations += 34;
                    break;
            }
        }

        // Update Progress UI
        function updateProgressUI() {
            const progressCircle = document.getElementById('progressCircle');
            const progressPercent = document.getElementById('progressPercent');
            const circumference = 175.93;
            const offset = circumference - (trialState.progress / 100) * circumference;
            
            progressCircle.style.strokeDashoffset = offset;
            progressPercent.textContent = Math.round(trialState.progress) + '%';
        }

        // Update Skills UI
        function updateSkillsUI() {
            Object.keys(trialState.skills).forEach(skill => {
                const fillElement = document.querySelector(`[data-skill="${skill}"]`);
                if (fillElement) {
                    fillElement.style.width = Math.min(trialState.skills[skill], 100) + '%';
                }
            });
        }

        // Mark Day Completed
        function markDayCompleted(day) {
            const dayChip = document.getElementById(`day${day}Chip`);
            dayChip.classList.remove('active');
            dayChip.classList.add('completed');
            dayChip.innerHTML = `<i class="fas fa-check mr-2"></i>Day ${day}: Completed`;
        }

        // Unlock Day
        function unlockDay(day) {
            const dayChip = document.getElementById(`day${day}Chip`);
            dayChip.classList.remove('locked');
            dayChip.classList.add('active');
            
            trialState.currentDay = day;
            loadDayContent(day);
            
            // Update day chip click handlers
            setupDayChipHandlers();
        }

        // Setup Day Chip Handlers
        function setupDayChipHandlers() {
            document.querySelectorAll('.day-chip').forEach(chip => {
                chip.addEventListener('click', function() {
                    const day = parseInt(this.dataset.day);
                    if (!this.classList.contains('locked') && trialState.completedTasks.includes(day - 1) || day === 1) {
                        loadDayContent(day);
                        // Update active state
                        document.querySelectorAll('.day-chip').forEach(c => c.classList.remove('active'));
                        if (!this.classList.contains('completed')) {
                            this.classList.add('active');
                        }
                    }
                });
            });
        }

        // Load Trial Progress
        function loadTrialProgress() {
            const saved = localStorage.getItem('trialProgress');
            if (saved) {
                const savedState = JSON.parse(saved);
                trialState = { ...trialState, ...savedState };
                updateProgressUI();
                updateSkillsUI();
                
                // Restore completed days
                trialState.completedTasks.forEach(day => {
                    markDayCompleted(day);
                    if (day < 3) unlockDay(day + 1);
                });
            }
        }

        // Certificate Modal
        function showCertificateModal() {
            const modal = document.getElementById('certificateModal');
            document.getElementById('certificateName').textContent = 
                `${trialState.user?.firstName || ''} ${trialState.user?.lastName || ''}`.trim();
            document.getElementById('certificateDate').textContent = 
                new Date().toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
            modal.classList.add('show');
        }

        // Download Certificate
        function downloadCertificate() {
            // In a real implementation, this would generate a PDF certificate
            showToast('Certificate download started!');
            console.log('Generating certificate for:', trialState.user);
        }

        // Add to LinkedIn
        function addToLinkedIn() {
            const url = `https://www.linkedin.com/profile/add?startTask=CERTIFICATION_NAME&name=TechStep%203-Day%20SOC%20Analyst%20Express%20Trial&organizationName=TechStep%20Foundation&issueYear=${new Date().getFullYear()}&issueMonth=${new Date().getMonth() + 1}`;
            window.open(url, '_blank');
        }

        // Utility Functions
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showToast('Copied to clipboard!');
                // Visual feedback
                event.target.classList.add('copied');
                setTimeout(() => {
                    event.target.classList.remove('copied');
                }, 1000);
            });
        }

        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast ${type === 'error' ? 'bg-red-600' : 'bg-green-600'}`;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 100);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => document.body.removeChild(toast), 300);
            }, 3000);
        }

        function downloadSyllabus() {
            showToast('Syllabus download started!');
            // In real implementation, would download actual PDF
        }

        function showConsultationModal() {
            showToast('Redirecting to consultation booking...');
            window.location.href = 'index.html#consultation';
        }

        // Initialize PDF Download
        document.getElementById('downloadPdfBtn').addEventListener('click', function() {
            const day = trialState.currentDay;
            showToast(`Downloading Day ${day} guide with audio QR code...`);
            // In real implementation, would generate PDF with QR code linking to audio
        });

        // Initialize app when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeTrialApp();
            setupDayChipHandlers();
        });
    </script>
</body>
</html>